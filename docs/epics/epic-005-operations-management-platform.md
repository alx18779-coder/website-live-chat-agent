# Epic 005: 运营管理平台

**创建时间**: 2025-10-24  
**负责角色**: PM (Product Manager AI)  
**状态**: 规划中  
**优先级**: P1

---

## 业务背景

### 问题陈述

当前智能客服系统虽然提供了完整的API接口，但缺乏可视化管理界面，导致运营人员在日常维护中面临以下痛点：

1. **知识库管理困难**：需要通过curl命令或Postman调用API上传、修改、删除知识库文档，操作复杂且容易出错
2. **对话质量无法监控**：无法直观查看历史对话记录，难以评估AI回答质量和发现知识库盲区
3. **缺乏数据洞察**：没有统计报表，无法了解系统使用情况，难以做出数据驱动的优化决策
4. **运营效率低下**：简单的知识库维护工作需要花费大量时间，学习成本高

这些问题导致系统运营成本高、服务质量难以保证、优化决策缺乏依据。

### 解决方案

构建一套完整的Web管理平台，为系统管理员提供：

1. **知识库可视化管理**：通过友好的Web界面管理知识库文档，支持查看、搜索、编辑、删除等操作
2. **对话历史查询分析**：查看历史对话记录，包括用户问题、AI回答、检索到的知识库文档，评估对话质量
3. **运营数据统计报表**：展示会话量、知识库使用率、高频问题等关键指标，支持数据驱动决策
4. **系统配置查看**：查看当前系统配置和运行状态，便于问题排查

### 目标用户

**主要用户**：系统管理员（1-5人的小团队）

**用户画像**：
- 负责日常知识库内容维护
- 需要监控AI对话质量
- 需要定期查看运营数据
- 具备基本的计算机操作能力，但不熟悉API调用

**使用场景**：
- 每日例行检查：查看昨日会话量、新增问题
- 知识库维护：根据用户反馈更新知识库内容
- 质量监控：抽查对话记录，评估回答质量
- 运营分析：每周查看统计报表，制定优化计划

---

## 业务价值

### 1. 降低运营成本（核心价值）

- **知识库管理效率提升80%**：从平均15分钟（使用API）降低到3分钟（使用Web界面）
- **减少学习成本**：无需学习API调用和命令行操作，新员工可快速上手
- **降低出错率**：可视化操作减少人为错误，避免误删重要文档

### 2. 提升服务质量

- **实时监控对话质量**：及时发现AI回答不佳的情况，快速优化
- **快速发现知识库盲区**：通过对话记录发现用户常问但知识库缺失的内容
- **持续改进机制**：基于数据反馈不断优化知识库内容

### 3. 数据驱动决策

- **了解系统运营状况**：通过统计数据了解用户使用习惯和系统表现
- **支持优化决策**：基于高频问题和命中率数据，优先优化重要内容
- **量化改进效果**：通过趋势图直观看到优化效果

---

## 核心功能需求

### 用户故事 1: 知识库可视化管理

**作为** 系统管理员  
**我希望** 通过Web界面查看、搜索、编辑、删除知识库文档  
**以便于** 快速维护知识库内容，无需记忆复杂的API命令

**验收标准**:
1. ✅ 可分页查看所有知识库文档（每页显示20条）
2. ✅ 支持关键词搜索文档（搜索标题和内容）
3. ✅ 可点击文档查看完整内容和metadata
4. ✅ 可编辑文档内容和metadata，保存后自动重新生成embedding
5. ✅ 可删除单个文档或批量删除多个文档
6. ✅ 所有操作成功后有明确的成功提示
7. ✅ 操作失败时显示清晰的错误信息

**场景示例**:
```
场景：更新过期的退货政策文档

1. 管理员登录系统（输入用户名密码）
2. 进入"知识库管理"页面
3. 看到文档列表，显示：
   - 文档标题（前50字符）
   - 分类标签
   - 创建时间
   - 操作按钮（查看、编辑、删除）
4. 在搜索框输入"退货政策"
5. 列表过滤显示相关文档
6. 点击"退货政策说明"文档
7. 进入详情页，看到完整文档内容
8. 点击"编辑"按钮
9. 修改文档内容：将"7天无理由退货"改为"30天无理由退货"
10. 点击"保存"按钮
11. 系统显示"保存成功，已重新生成向量"
12. 返回文档列表

预期结果：
- 文档内容已更新
- 用户询问退货政策时，AI会回答"30天无理由退货"
- 操作耗时<1分钟
```

### 用户故事 2: 对话历史查询分析

**作为** 系统管理员  
**我希望** 查看历史对话记录，包括用户问题、AI回答、检索到的知识库文档  
**以便于** 评估对话质量，发现知识库盲区，优化内容

**验收标准**:
1. ✅ 可按时间范围查询历史会话（默认显示最近7天）
2. ✅ 会话列表显示基本信息：会话ID、消息数量、最后消息时间
3. ✅ 可点击会话查看详细对话内容
4. ✅ 对话详情显示完整的对话树（用户问题 → 知识库检索 → AI回答）
5. ✅ 显示每次对话检索到的知识库文档列表（标题、相似度分数）
6. ✅ 显示置信度分数（如果有）
7. ✅ 支持按会话ID搜索

**场景示例**:
```
场景：评估AI对"发货时间"问题的回答质量

1. 进入"对话监控"页面
2. 选择时间范围：最近7天
3. 看到会话列表（共150个会话）
4. 注意到某个会话的消息数量较多（10条），可能是用户不满意
5. 点击该会话查看详情
6. 看到对话记录：
   用户："你们什么时候发货？"
   AI："我们会尽快为您发货。"（检索到0个知识库文档）
   用户："具体多久？"
   AI："通常在1-3个工作日内发货。"（检索到1个文档，相似度0.65）
   ...（用户反复追问）
7. 分析发现：
   - 第一次回答没有检索到知识库文档
   - 知识库中关于"发货时间"的文档描述不够清晰
8. 决定优化知识库：添加明确的"发货时间说明"文档

预期结果：
- 管理员可以快速定位问题对话
- 发现知识库盲区
- 制定优化计划
```

### 用户故事 3: 运营数据统计

**作为** 系统管理员  
**我希望** 查看会话量、知识库使用率、高频问题等统计数据  
**以便于** 了解系统运营状况，做出优化决策

**验收标准**:
1. ✅ 显示今日/本周/本月会话量（卡片形式）
2. ✅ 显示知识库文档总数
3. ✅ 显示知识库命中率（检索成功率，即检索到文档的对话占比）
4. ✅ 显示会话量趋势图（折线图，最近7天/30天）
5. ✅ 显示高频问题Top 10（柱状图或列表）
6. ✅ 支持切换时间范围（7天/30天）

**场景示例**:
```
场景：每周运营数据分析

1. 进入"统计报表"页面
2. 看到总览卡片：
   - 本周会话量：850次（↑15% vs上周）
   - 知识库文档：520条
   - 知识库命中率：78%（↓5% vs上周）
3. 看到会话量趋势图：
   - 周一到周五稳定在100-150次/天
   - 周末下降到50次/天
4. 看到高频问题Top 10：
   1. "退货政策是什么？" - 85次
   2. "发货时间多久？" - 72次
   3. "如何联系客服？" - 65次
   ...
5. 分析发现：
   - 会话量稳定增长，说明用户接受度提高
   - 命中率下降，需要检查知识库质量
   - "发货时间"问题频繁，但命中率低，需要优化相关文档
6. 制定行动计划：
   - 优化"发货时间"相关文档
   - 补充"联系客服"相关内容

预期结果：
- 管理员可以快速了解系统运营状况
- 发现优化机会
- 制定数据驱动的优化计划
```

### 用户故事 4: 系统配置查看

**作为** 系统管理员  
**我希望** 查看当前系统配置（LLM模型、召回参数等）和运行状态  
**以便于** 了解系统运行状态，排查问题

**验收标准**:
1. ✅ 显示当前LLM配置（提供商、模型名称）
2. ✅ 显示向量召回参数（Top-K、相似度阈值）
3. ✅ 显示Milvus连接状态（连接正常/异常、文档数量）
4. ✅ 显示Redis连接状态（连接正常/异常、内存使用）
5. ✅ 配置信息脱敏（API Key仅显示前4位和后4位，中间用*代替）
6. ✅ 显示系统版本信息

**场景示例**:
```
场景：排查系统响应缓慢问题

1. 进入"系统设置"页面
2. 看到配置信息：
   - LLM提供商：DeepSeek
   - LLM模型：deepseek-chat
   - API Key：sk-ab***************xyz
   - 向量召回Top-K：3
   - 相似度阈值：0.7
3. 看到服务状态：
   - Milvus：✅ 正常（文档数：520条）
   - Redis：✅ 正常（内存使用：128MB）
   - LLM API：✅ 正常（平均响应时间：1.2s）
4. 点击"健康检查"按钮
5. 系统测试各服务连通性
6. 显示详细检查结果

预期结果：
- 管理员可以快速了解系统配置
- 发现潜在问题（如内存使用过高）
- 辅助技术团队排查问题
```

---

## Epic级别验收标准

### 功能验收

1. ✅ **知识库管理功能完整**
   - 可查看、搜索、编辑、删除知识库文档
   - 支持批量操作
   - 操作响应及时（<2秒）

2. ✅ **对话监控功能完整**
   - 可查询历史对话记录
   - 可查看对话详情和检索结果
   - 支持时间范围过滤

3. ✅ **统计报表功能完整**
   - 显示关键运营指标
   - 提供趋势分析图表
   - 数据准确无误

4. ✅ **系统配置功能完整**
   - 显示当前配置信息
   - 显示服务运行状态
   - 敏感信息已脱敏

5. ✅ **用户体验良好**
   - 界面简洁直观
   - 操作流程顺畅
   - 所有操作有明确反馈

### 质量验收

1. ✅ **性能达标**
   - 页面加载时间<2秒
   - 列表分页加载流畅
   - 支持1000+文档的流畅浏览

2. ✅ **稳定性达标**
   - 系统运行稳定，无崩溃
   - 错误处理完善，不影响使用
   - 数据一致性保证

3. ✅ **安全性达标**
   - 登录认证机制完善
   - 敏感信息已脱敏
   - 操作权限控制到位

4. ✅ **文档完整**
   - 提供用户操作手册
   - 提供部署指南
   - 提供API文档（供技术团队参考）

### 业务价值验收

1. ✅ **运营效率提升**
   - 知识库管理时间从平均15分钟降低到3分钟（提升80%）
   - 对话质量问题发现时间从1天降低到1小时

2. ✅ **数据可见性提升**
   - 100%历史对话可查询
   - 关键运营指标实时可见
   - 支持数据导出（CSV/JSON格式）

3. ✅ **用户满意度达标**
   - 管理员操作满意度达到4星以上（5星制）
   - 上线后7天内，管理员日均使用≥3次
   - 收集到的反馈中，正面评价≥80%

---

## 时间规划

**Epic启动时间**: 2025-10-24  
**预计完成时间**: 2025-11-01（8个工作日）

### 里程碑

**Phase 1: 技术设计（Day 1-2）**
- AR（架构师）进行技术方案设计
- 确定技术栈和架构
- 评审技术方案

**Phase 2: 后端开发（Day 3-5）**
- LD（开发工程师）开发管理后台API
- 实现认证、知识库管理、对话查询、统计分析等接口
- 单元测试

**Phase 3: 前端开发（Day 6-7）**
- LD开发管理界面
- 实现所有页面和交互
- 前后端联调

**Phase 4: 测试和文档（Day 8）**
- QA（测试工程师）进行功能测试
- 修复发现的问题
- 编写用户文档和部署指南

---

## 成功指标

### 定量指标

1. **效率指标**
   - 知识库管理效率提升：≥80%
   - 对话质量问题发现时间：从1天降低到1小时

2. **覆盖指标**
   - 历史对话查询覆盖率：100%
   - 统计数据准确率：≥99%

3. **使用指标**
   - 上线后7天内，管理员日均使用次数：≥3次
   - 管理员活跃率：≥80%（至少每周使用1次）

### 定性指标

1. **满意度指标**
   - 管理员NPS（净推荐值）：≥8分（10分制）
   - 用户反馈正面评价占比：≥80%

2. **质量指标**
   - 系统稳定性：无严重bug
   - 用户学习成本：新用户可在30分钟内掌握基本操作

---

## 风险和依赖

### 风险

1. **技术风险**
   - 前后端分离架构的部署复杂度
   - PostgreSQL引入可能增加维护成本
   - 缓解措施：提供完整的部署文档和脚本

2. **时间风险**
   - 8天时间可能偏紧
   - 缓解措施：优先实现核心功能，次要功能可后续迭代

### 依赖

1. **技术依赖**
   - 需要AR进行技术方案设计
   - 需要LD进行开发实现
   - 需要QA进行测试验证

2. **资源依赖**
   - 需要PostgreSQL服务器（可使用Docker）
   - 需要前端部署环境（Nginx）

---

## 后续规划

本Epic为MVP版本，后续可考虑以下增强功能：

1. **知识库增强**
   - 文档版本控制
   - 文档质量评分
   - 智能去重检测

2. **对话监控增强**
   - 实时会话监控（WebSocket）
   - 管理员实时介入对话
   - 对话质量自动评分

3. **统计报表增强**
   - 自定义时间范围
   - 更多维度的分析（用户画像、时段分析等）
   - 数据导出和分享

4. **权限管理**
   - 多管理员账户
   - 角色权限控制（超级管理员、运营、只读用户）

5. **智能推荐**
   - 基于历史数据推荐知识库优化建议
   - A/B测试不同召回策略

---

## 附录

### 相关文档
- 技术设计文档：待AR创建
- API文档：待LD创建
- 用户手册：待完成后编写

### 术语表
- **知识库文档**：存储在Milvus中的文本内容，用于RAG检索
- **对话会话**：用户与AI的一次完整对话交互
- **知识库命中率**：检索到知识库文档的对话占总对话的百分比
- **置信度分数**：AI对自己回答质量的评估分数（0-1）

---

**文档版本**: v1.0  
**最后更新**: 2025-10-24  
**更新人**: PM AI

