# ===== 基础配置 =====
# API认证密钥（必填）
API_KEY=your-api-key-here

# 服务端口
PORT=8000

# 日志级别
LOG_LEVEL=INFO

# ===== LLM 配置 =====
# LLM提供商 (openai/anthropic/deepseek/siliconflow)
LLM_PROVIDER=deepseek

# DeepSeek配置
DEEPSEEK_API_KEY=your-deepseek-api-key
DEEPSEEK_MODEL=deepseek-chat

# OpenAI配置（如果使用OpenAI）
# OPENAI_API_KEY=your-openai-api-key
# OPENAI_MODEL=gpt-4o-mini

# ===== Embedding 配置 =====
# Embedding提供商 (openai/deepseek/local/siliconflow)
EMBEDDING_PROVIDER=deepseek
EMBEDDING_MODEL=deepseek-embedding

# ===== Milvus 配置 =====
# Milvus服务器地址（必填）
MILVUS_HOST=localhost
MILVUS_PORT=19530
MILVUS_USER=root
MILVUS_PASSWORD=
MILVUS_DATABASE=default

# 知识库Collection名称
MILVUS_KNOWLEDGE_COLLECTION=knowledge_base
MILVUS_HISTORY_COLLECTION=conversation_history

# ===== Redis 配置 =====
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_MAX_CONNECTIONS=10

# ===== LangGraph 配置 =====
LANGGRAPH_MAX_ITERATIONS=10
LANGGRAPH_CHECKPOINTER=redis

# ===== 向量召回配置 =====
# 注意：RAG_* 配置项已迁移为 VECTOR_*，旧字段保留为别名
VECTOR_TOP_K=3
VECTOR_SCORE_THRESHOLD=0.7
VECTOR_CHUNK_SIZE=500
VECTOR_CHUNK_OVERLAP=50

# ===== 性能配置 =====
LLM_TEMPERATURE=0.7
LLM_MAX_TOKENS=2000
CACHE_TTL=300

# ===== 消息过滤配置 =====
MESSAGE_FILTER_ENABLED=True
MESSAGE_MAX_LENGTH=1000
INSTRUCTION_KEYWORDS="You are an AI,Your role is to,Follow these guidelines,Use user's language,Always return,Always wrap,You are a helpful assistant,Your task is to,Please rephrase,Convert the following,Transform this query"
TECHNICAL_TERMS_THRESHOLD=3
TECHNICAL_TERMS="API,endpoint,function,method,parameter,response,request"

# ===== 召回编排层配置 =====
# 启用的召回源列表（逗号分隔）
RECALL_SOURCES=["vector"]

# 召回源权重配置（逗号分隔，格式: source:weight）
RECALL_SOURCE_WEIGHTS="vector:1.0"

# 召回超时时间（毫秒）
RECALL_TIMEOUT_MS=500

# 召回失败重试次数
RECALL_RETRY=1

# 召回结果合并策略 (weighted/rrf/custom)
RECALL_MERGE_STRATEGY="weighted"

# 召回结果置信度降级阈值（0.0-1.0）
RECALL_DEGRADE_THRESHOLD=0.5

# 是否启用召回降级策略
RECALL_FALLBACK_ENABLED=True

# 是否启用召回实验
RECALL_EXPERIMENT_ENABLED=False

# 实验平台类型（None/internal/growthbook等）
RECALL_EXPERIMENT_PLATFORM=None

# ===== 多源召回配置示例（注释形式） =====
# 启用多个召回源的配置示例：
# RECALL_SOURCES=["vector","faq","keyword"]
# RECALL_SOURCE_WEIGHTS="vector:0.7,faq:0.2,keyword:0.1"

# 使用RRF（Reciprocal Rank Fusion）合并策略：
# RECALL_MERGE_STRATEGY="rrf"

# 启用实验功能：
# RECALL_EXPERIMENT_ENABLED=True
# RECALL_EXPERIMENT_PLATFORM="internal"
